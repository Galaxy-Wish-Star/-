{"remainingRequest":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\userprofile\\components\\update-name.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\userprofile\\components\\update-name.vue","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1674635619784},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1674635619517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgICB1cGRhdGVVc2VyUHJvZmlsZQp9IGZyb20gJ0AvYXBpL3VzZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAndXBhZGF0ZU5hbWUnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsb2NhbE5hbWU6IHRoaXMudmFsdWUKICAgICAgICB9CiAgICB9LAogICAgcHJvcHM6IFsndmFsdWUnXSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBvbkNvbmZpcm0oKSB7CiAgICAgICAgICAgIC8vIOivt+axguaPkOS6pOabtOaWsOaYteensAogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoJ+S/neWtmOS4rScpOwogICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlVXNlclByb2ZpbGUoewogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubG9jYWxOYW1lCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsdGhpcy5sb2NhbE5hbWUpCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnJlcG9uc2UgJiYgZXJyb3IucmVwb25zZS5zdGF0dXMgPT09IDQwOSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmZhaWwoJ+aYteensOmHjeWkje+8jOS/neWtmOWksei0pe+8gScpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdChlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCn0K"},{"version":3,"sources":["update-name.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"update-name.vue","sourceRoot":"src/views/userprofile/components","sourcesContent":["<template>\n    <div class=\"update-name\">\n        <!-- 上方导航栏 -->\n        <van-nav-bar title=\"修改昵称\" left-text=\"取消\" right-text=\"完成\" @click-left=\"$emit('close')\"\n            @click-right=\"onConfirm\" />\n        <van-field class=\"name-wrap\" v-model=\"localName\" rows=\"2\" autosize type=\"textarea\" maxlength=\"7\"\n            placeholder=\"请输入昵称\" show-word-limit />\n    </div>\n</template>\n\n<script>\n    import {\n        updateUserProfile\n    } from '@/api/user';\n    export default {\n        name: 'upadateName',\n        data() {\n            return {\n                localName: this.value\n            }\n        },\n        props: ['value'],\n        methods: {\n            async onConfirm() {\n                // 请求提交更新昵称\n                try {\n                    this.$toast('保存中');\n                    await updateUserProfile({\n                        name: this.localName\n                    })\n                    this.$toast.success('修改成功');\n                    this.$emit('input',this.localName)\n                    this.$emit('close');\n                } catch (error) {\n                    if (error && error.reponse && error.reponse.status === 409) {\n                        this.$toast.fail('昵称重复，保存失败！');\n                    } else {\n                        this.$toast(error.message);\n                    }\n                }\n            }\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .update-name {\n\n        /deep/ .van-nav-bar__content {\n            background-color: white !important;\n\n        }\n\n        /deep/ .van-nav-bar__title {\n            color: #000 !important;\n        }\n\n\n    }\n</style>"]}]}