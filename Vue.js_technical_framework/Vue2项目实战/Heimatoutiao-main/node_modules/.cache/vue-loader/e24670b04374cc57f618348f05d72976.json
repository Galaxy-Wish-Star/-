{"remainingRequest":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\home\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\home\\index.vue","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1674635619784},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1674635619517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDaGFubmVsRWRpdCBmcm9tICIuL2NvbXBvbmVudHMvY2hhbm5lbC1lZGl0LnZ1ZSI7CmltcG9ydCB7IGdldFVzZXJDaGFubmVscyB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IEFydGljbGVMaXN0IGZyb20gIi4vY29tcG9uZW50cy9hcnRpY2xlLWxpc3QudnVlIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgZ2V0SXRlbSB9IGZyb20gIkAvdXRpbHMvc3RvcmFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcnRpY2xlTGlzdCwKICAgIENoYW5uZWxFZGl0LAogIH0sCiAgbmFtZTogImhvbWUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmU6IDAsCiAgICAgIGNoYW5uZWxzOiBbXSwKICAgICAgaXNDaGFubmVsRWRpdFNob3c6IGZhbHNlLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFVzZXJDaGFubmVscygpIHsKICAgICAgaWYgKHRoaXMudXNlcikgewogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgZ2V0VXNlckNoYW5uZWxzKCk7CiAgICAgICAgdGhpcy5jaGFubmVscyA9IGRhdGEuZGF0YS5jaGFubmVsczsKICAgICAgICBpZihkYXRhLnN0YXR1cz09PTQwMSl7CiAgICAgICAgICAvLyDmraTml7bliLfmlrB0b2tlbuS5n+WkseaViOS6hgogICAgICAgICAgCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGxvY2FsQ2hhbm5lbHMgPSBnZXRJdGVtKCJ1c2VyLWNoYW5uZWxzIik7CiAgICAgICAgaWYgKGxvY2FsQ2hhbm5lbHMpIHsKICAgICAgICAgIHRoaXMuY2hhbm5lbHMgPSBsb2NhbENoYW5uZWxzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGdldFVzZXJDaGFubmVscygpOwogICAgICAgICAgdGhpcy5jaGFubmVscyA9IGRhdGEuZGF0YS5jaGFubmVsczsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc2hvd0NoYW5uZWxFZGl0KCkgewogICAgICB0aGlzLmlzQ2hhbm5lbEVkaXRTaG93ID0gdHJ1ZTsKICAgIH0sCgogICAgb25VcGRhdGVBY3RpdmUoaW5kZXgpIHsKICAgICAgdGhpcy5hY3RpdmUgPSBpbmRleDsKICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWyJ1c2VyIl0pLAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlckNoYW5uZWxzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div class=\"home-container\">\n    <!-- 上部搜索导航栏 -->\n    <van-nav-bar class=\"nav-bar-search\">\n      <van-button\n        slot=\"title\"\n        round\n        size=\"small\"\n        class=\"search-button\"\n        icon=\"search\"\n        to=\"/search\"\n        >搜索</van-button\n      >\n    </van-nav-bar>\n\n    <!-- tab栏标签 -->\n    <van-tabs\n      class=\"channel-tabs\"\n      v-model=\"active\"\n      border\n      color=\"#3296fa\"\n      line-width=\"15px\"\n    >\n      <van-tab\n        class=\"channel-tabs-item\"\n        v-for=\"channel in channels\"\n        :title=\"channel.name\"\n        :key=\"channel.id\"\n      >\n        <article-list :channel=\"channel\"></article-list>\n      </van-tab>\n      <!-- 弹出层按钮 -->\n      <div\n        slot=\"nav-right\"\n        class=\"wap-nav-wrap\"\n        @click=\"isChannelEditShow = true\"\n      >\n        <van-icon name=\"wap-nav\" />\n      </div>\n      <div\n        slot=\"nav-right\"\n        class=\"wap-nav-set\"\n        @click=\"isChannelEditShow = true\"\n      ></div>\n    </van-tabs>\n    <!-- tab栏 -->\n\n    <!-- 弹出层 -->\n\n    <van-popup\n      v-model=\"isChannelEditShow\"\n      class=\"channel-popup-edit\"\n      closeable\n      position=\"bottom\"\n      get-container=\"body\"\n    >\n      <!-- 组件 -->\n      <channel-edit\n        :active=\"active\"\n        @update-active=\"onUpdateActive\"\n        :channels=\"channels\"\n        @close=\"isChannelEditShow = false\"\n      ></channel-edit>\n      <!-- 组件 -->\n    </van-popup>\n    <!-- 弹出层 -->\n  </div>\n</template>\n\n<script>\nimport ChannelEdit from \"./components/channel-edit.vue\";\nimport { getUserChannels } from \"@/api\";\nimport ArticleList from \"./components/article-list.vue\";\nimport { mapState } from \"vuex\";\nimport { getItem } from \"@/utils/storage\";\nexport default {\n  components: {\n    ArticleList,\n    ChannelEdit,\n  },\n  name: \"home\",\n  data() {\n    return {\n      active: 0,\n      channels: [],\n      isChannelEditShow: false,\n    };\n  },\n  methods: {\n    async getUserChannels() {\n      if (this.user) {\n        const { data } = await getUserChannels();\n        this.channels = data.data.channels;\n        if(data.status===401){\n          // 此时刷新token也失效了\n          \n        }\n      } else {\n        const localChannels = getItem(\"user-channels\");\n        if (localChannels) {\n          this.channels = localChannels;\n        } else {\n          const { data } = await getUserChannels();\n          this.channels = data.data.channels;\n        }\n      }\n    },\n\n    showChannelEdit() {\n      this.isChannelEditShow = true;\n    },\n\n    onUpdateActive(index) {\n      this.active = index;\n    },\n  },\n  computed: {\n    ...mapState([\"user\"]),\n  },\n  mounted() {\n    this.getUserChannels();\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n// 弹出层 挂载到body下\n.channel-popup-edit {\n  height: 100%;\n}\n\n.home-container {\n  .channel-tabs {\n    .wap-nav-set {\n      flex-shrink: 0;\n      //不参与平分 只参与固定。\n      width: 40px;\n    }\n\n    .wap-nav-wrap {\n      position: fixed;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      line-height: 44px;\n      right: 0px;\n      width: 40px;\n      height: 43px;\n      font-size: 20px;\n      background-color: rgba(255, 255, 255, 0.8);\n    }\n\n    /deep/ .van-tabs__nav {\n      padding: 0 !important;\n    }\n\n    /deep/ .van-tab {\n      border-right: 1px rgb(231, 231, 231) solid;\n      border-bottom: 1px rgb(223, 221, 221) solid;\n      width: 100px;\n    }\n\n    ::v-deep .van-tabs__line {\n      bottom: 6px !important;\n    }\n  }\n\n  .nav-bar-search {\n    /deep/ .van-nav-bar__title {\n      max-width: unset;\n    }\n\n    .search-button {\n      width: 277px;\n      height: 32px;\n      background-color: #5babfb;\n      border: none;\n      color: #fff;\n\n      .van-button__text {\n        font-size: 14px;\n      }\n\n      .van-icon {\n        font-size: 16px;\n        color: white;\n      }\n    }\n  }\n}\n</style>"]}]}