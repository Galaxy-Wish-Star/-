{"remainingRequest":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\home\\components\\article-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\home\\components\\article-list.vue","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\babel.config.js","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1674635619784},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1674635619517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxXZWJfREVWX0lOR1xcVnVlLmpzX3RlY2huaWNhbF9mcmFtZXdvcmtcXFZ1ZTJcdTk4NzlcdTc2RUVcdTVCOUVcdTYyMThcXEhlaW1hdG91dGlhby1tYWluXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0Q2hhbm5lbEJ5SWQgfSBmcm9tICdAL2FwaS9hcnRpY2xlJzsKaW1wb3J0IEFydGljbGVJdGVtIGZyb20gJ0AvY29tcG9uZW50cy9hcnRpY2xlLWl0ZW0nOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJ2xvZGFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXJ0aWNsZWxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIEFydGljbGVJdGVtOiBBcnRpY2xlSXRlbQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIGFydGljbGVzOiBbXSwKICAgICAgdGltZXN0YW1wOiAwLAogICAgICBpc1B1bGxSZWZyZXNoOiBmYWxzZSwKICAgICAgcmVmcmVzaFN1Y2Nlc3NUZXh0OiAnJwogICAgfTsKICB9LAogIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKCkgewogICAgdGhpcy4kcmVmc1snYXJ0aWNsZS1saXN0J10uc2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3A7CiAgfSwKICBwcm9wczogewogICAgY2hhbm5lbDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgYXJ0aWNsZUxpc3QgPSB0aGlzLiRyZWZzWydhcnRpY2xlLWxpc3QnXTsKICAgIGFydGljbGVMaXN0Lm9uc2Nyb2xsID0gZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zY3JvbGxUb3AgPSBhcnRpY2xlTGlzdC5zY3JvbGxUb3A7CiAgICAgIGNvbnNvbGUubG9nKF90aGlzLnNjcm9sbFRvcCk7CiAgICB9LCA1MCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkZ2V0Q2hhbm5lbEJ5SWQsIGRhdGEsIHJlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2hhbm5lbEJ5SWQoewogICAgICAgICAgICAgICAgICBjaGFubmVsX2lkOiBfdGhpczIuY2hhbm5lbC5pZCwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBfdGhpczIudGltZXN0YW1wID09PSAwID8gRGF0ZS5ub3coKSA6IF90aGlzMi50aW1lc3RhbXAsCiAgICAgICAgICAgICAgICAgIHdpdGhfdG9wOiAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJGdldENoYW5uZWxCeUlkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkZ2V0Q2hhbm5lbEJ5SWQuZGF0YTsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRhdGEuZGF0YS5yZXN1bHRzOwogICAgICAgICAgICAgICAgX3RoaXMyLnRpbWVzdGFtcCA9IGRhdGEuZGF0YS5wcmVfdGltZXN0YW1wIHx8IDA7CiAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICBfdGhpczIuYXJ0aWNsZXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsgLy8g5aaC5p6c6K+35rGC5LiN5Yiw5pWw5o2u5LqG77yM5bCx57uT5p2f6K+35rGCCgogICAgICAgICAgICAgICAgaWYgKF90aGlzMi50aW1lc3RhbXAgPT09IDApIF90aGlzMi5maW5pc2hlZCA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDkuIvmi4nliLfmlrAKICAgIG9uUmVmcmVzaDogZnVuY3Rpb24gb25SZWZyZXNoKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfeWllbGQkZ2V0Q2hhbm5lbEJ5SWQyLCBkYXRhLCByZXN1bHQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2hhbm5lbEJ5SWQoewogICAgICAgICAgICAgICAgICBjaGFubmVsX2lkOiBfdGhpczMuY2hhbm5lbC5pZCwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICB3aXRoX3RvcDogMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRnZXRDaGFubmVsQnlJZDIgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkZ2V0Q2hhbm5lbEJ5SWQyLmRhdGE7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBkYXRhLmRhdGEucmVzdWx0czsKICAgICAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5hcnRpY2xlcy51bnNoaWZ0KGl0ZW0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpczMucmVmcmVzaFN1Y2Nlc3NUZXh0ID0gIlx1NjZGNFx1NjVCMFx1NEU4NiIuY29uY2F0KHJlc3VsdC5sZW5ndGgsICJcdTY3NjFcdTY1NzBcdTYzNkUiKTsKICAgICAgICAgICAgICAgIF90aGlzMy5pc1B1bGxSZWZyZXNoID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["article-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"article-cotainer\" ref=\"article-list\">\n        <!-- 下拉刷新容器 -->\n        <van-pull-refresh \n        v-model=\"isPullRefresh\" \n        :success-text=\"refreshSuccessText\"\n        :success-duration=\"500\"\n        @refresh=\"onRefresh\">\n            <!-- 渲染组件块 -->\n            <van-list v-model=\"loading\" \n            :finished=\"finished\" \n            finished-text=\"没有更多了\" \n            @load=\"onLoad\">\n                <!-- 单元格结构 -->\n                <article-item\n                v-for=\"(item,index) in articles\" \n                :key=\"index\"\n                :article=\"item\"\n                />\n            </van-list>\n        </van-pull-refresh>\n    </div>\n</template>\n\n<script>\n    import {getChannelById} from '@/api/article';\n    import ArticleItem from '@/components/article-item';\n    import {debounce} from 'lodash';\n    export default {\n        name: 'Articlelist',\n        components:{\n            ArticleItem\n        },\n        data() {\n            return {\n                loading: false,\n                finished: false,\n                articles: [],\n                timestamp: 0,\n                isPullRefresh:false,\n                refreshSuccessText:''\n            }\n        },\n        activated(){\n            this.$refs['article-list'].scrollTop=this.scrollTop\n        },\n        props: {\n            channel: {\n                type: Object,\n                required: true\n            }\n        },\n        mounted() {\n            const articleList = this.$refs['article-list'];\n            articleList.onscroll = debounce( () =>{\n                this.scrollTop=articleList.scrollTop;\n                console.log(this.scrollTop);\n            },50)\n        },\n        methods: {\n            async onLoad() {\n                // 异步更新数据\n                const {\n                    data\n                } = await getChannelById({\n                    channel_id: this.channel.id,\n                    timestamp: this.timestamp === 0 ? Date.now() : this.timestamp,\n                    with_top:0\n                });\n                const result = data.data.results;\n                this.timestamp = data.data.pre_timestamp || 0;\n                result.forEach(item => {\n                    this.articles.push(item);\n                });\n                this.loading = false;\n                // 如果请求不到数据了，就结束请求\n                if (this.timestamp === 0) this.finished = true;\n            },\n            // 下拉刷新\n            async onRefresh(){\n                // 请求获取数据\n                // 数据unshift\n                const {data} = await getChannelById({\n                    channel_id: this.channel.id,\n                    timestamp: Date.now(),\n                    with_top:0\n                });\n                const result = data.data.results;\n                result.forEach(item => {\n                    this.articles.unshift(item);\n                });\n                this.refreshSuccessText=`更新了${result.length}条数据`;\n                this.isPullRefresh=false;\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    .article-cotainer {\n        position: fixed;\n        left: 0;\n        right: 0;\n        bottom: 50px;\n        top: 90px;\n        overflow-y: auto;\n    }\n</style>"],"sourceRoot":"src/views/home/components"}]}