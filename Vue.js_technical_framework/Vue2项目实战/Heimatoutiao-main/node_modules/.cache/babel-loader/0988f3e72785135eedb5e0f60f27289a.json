{"remainingRequest":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\login\\index.vue","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\babel.config.js","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1674635619784},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1674635619517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxXZWJfREVWX0lOR1xcVnVlLmpzX3RlY2huaWNhbF9mcmFtZXdvcmtcXFZ1ZTJcdTk4NzlcdTc2RUVcdTVCOUVcdTYyMThcXEhlaW1hdG91dGlhby1tYWluXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbG9naW4sIHNlbmRTbXMgfSBmcm9tICJAL2FwaSI7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAidmFudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibG9naW4iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgbW9iaWxlOiAiIiwKICAgICAgICBjb2RlOiAiIgogICAgICB9LAogICAgICAvLyDpqozor4Hop4TliJkKICAgICAgZm9ybVJ1bGVzOiB7CiAgICAgICAgbW9iaWxlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5omL5py65Y+377yBIiwKICAgICAgICAgIHRyaWdnZXI6ICJvbkJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgcGF0dGVybjogL14oMTNbMC05XXwxNFswMTQ1Njg3OV18MTVbMC0zNS05XXwxNlsyNTY3XXwxN1swLThdfDE4WzAtOV18MTlbMC0zNS05XSlcZHs4fSQvLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeato+ehrueahOaJi+acuuWPt++8gSIsCiAgICAgICAgICB0cmlnZ2VyOiAib25CbHVyIgogICAgICAgIH1dLAogICAgICAgIGNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXpqozor4HnoIHvvIEiLAogICAgICAgICAgdHJpZ2dlcjogIm9uQmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBwYXR0ZXJuOiAvXGR7Nn0kLywKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXmraPnoa7nmoTpqozor4HnoIHvvIEiLAogICAgICAgICAgdHJpZ2dlcjogIm9uQmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICBpc0NvdW50OiBmYWxzZSwKICAgICAgaXNsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uTG9naW46IGZ1bmN0aW9uIG9uTG9naW4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkbG9naW4sIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIFRvYXN0LmxvYWRpbmcoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi55m75b2V5LitLi4uIiwKICAgICAgICAgICAgICAgICAgZm9yYmlkQ2xpY2s6IHRydWUsCiAgICAgICAgICAgICAgICAgIC8v56aB5q2iCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9naW4oX3RoaXMudXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF95aWVsZCRsb2dpbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGxvZ2luLmRhdGE7CiAgICAgICAgICAgICAgICBUb2FzdC5zdWNjZXNzKCLnmbvlvZXmiJDlip/vvIEiKTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNldFVzZXIiLCBkYXRhLmRhdGEpOyAvLyDot7PovazkuYvliY0g5riF6Zmk6aG16Z2i57yT5a2YCgoKICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoIlJFTU9WRUNBQ0hFUEFHRSIsICJsYXlvdXQiKTsgLy8gdGhpcy4kcm91dGVyLmJhY2soKTsKICAgICAgICAgICAgICAgIC8vIOi3s+i9rOWbnuWOn+adpeeahOmhtemdogoKCiAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goX3RoaXMuJHJvdXRlLnF1ZXJ5LnJlZGlyZWN0IHx8ICIvIik7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQudDApOwogICAgICAgICAgICAgICAgVG9hc3QuZmFpbCgi55m75b2V5aSx6LSl77yBIik7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvbkZhaWxlZDogZnVuY3Rpb24gb25GYWlsZWQoZXJyb3IpIHsKICAgICAgaWYgKGVycm9yLmVycm9yc1swXSkgewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLmVycm9yc1swXS5tZXNzYWdlLAogICAgICAgICAgcG9zaXRpb246ICJ0b3AiCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvblNlbmRzbXM6IGZ1bmN0aW9uIG9uU2VuZHNtcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgbXNnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyDorqlidXR0b27mmL7npLpsb2FkaW5nCiAgICAgICAgICAgICAgICBfdGhpczIuaXNsb2FkaW5nID0gdHJ1ZTsgLy8g5qCh6aqM5omL5py65Y+35LmL5ZCO5YaN6L+b6KGM5Y+R6YCBCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kcmVmc1sibG9naW4tZm9ybSJdLnZhbGlkYXRlKCJtb2JpbGUiKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRTbXMoX3RoaXMyLnVzZXIubW9iaWxlKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX3RoaXMyLmlzQ291bnQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBtc2cgPSAiIjsgLy8g6L+b6KGM6ZSZ6K+v55qE5Yik5patCgogICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MCAmJiBfY29udGV4dDIudDAucmVzcG9uc2UgJiYgX2NvbnRleHQyLnQwLnJlc3BvbnNlLnN0YXR1cyA9PSA0MjkpIHsKICAgICAgICAgICAgICAgICAgbXNnID0gIuWPkemAgeWkqumikee5geS6huivt+eojeWQjumHjeivlSI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9jb250ZXh0Mi50MC5uYW1lID09ICJtb2JpbGUiKSB7CiAgICAgICAgICAgICAgICAgIG1zZyA9IF9jb250ZXh0Mi50MC5tZXNzYWdlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfY29udGV4dDIudDAucmVzcG9uc2Uuc3RhdHVzID09IDQwNCkgewogICAgICAgICAgICAgICAgICBtc2cgPSAi5omL5py65Y+36ZSZ6K+v77yM6K+36YeN5paw5bCd6K+VIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG1zZyA9ICLmnKrnn6XplJnor6/vvIzor7fph43mlrDlsJ3or5UiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMi4kdG9hc3QoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtc2csCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wIgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAvLyDorqlidXR0b27lhbPpl61sb2FkaW5nCiAgICAgICAgICAgICAgICBfdGhpczIuaXNsb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgOV1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICBuZXh0KGZ1bmN0aW9uICh2bSkgewogICAgICBpZiAodm0uJHN0b3JlLnN0YXRlLnVzZXIpIHsKICAgICAgICBUb2FzdCgn5L2g5bey57uP55m76ZmG6L+H5LqGficpOwogICAgICAgIG5leHQoZnJvbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <van-nav-bar title=\"登录\" left-arrow @click-left=\"$router.back()\" />\n    <!-- 表单 -->\n    <van-form\n      @submit=\"onLogin\"\n      @failed=\"onFailed\"\n      ref=\"login-form\"\n      :show-error=\"false\"\n      :show-error-message=\"false\"\n      :validate-first=\"true\"\n    >\n      <van-cell-group>\n        <van-field\n          v-model=\"user.mobile\"\n          class=\"iconfont\"\n          icon-prefix=\"icon\"\n          left-icon=\"shouji\"\n          placeholder=\"请输入手机号\"\n          clearable\n          name=\"mobile\"\n          :rules=\"formRules.mobile\"\n        />\n\n        <van-field\n          v-model=\"user.code\"\n          class=\"iconfont\"\n          icon-prefix=\"icon\"\n          left-icon=\"yanzhengma\"\n          placeholder=\"请输入验证码\"\n          name=\"code\"\n          :rules=\"formRules.code\"\n        >\n          <template #button>\n            <van-count-down\n              class=\"countDown\"\n              @finish=\"isCount = false\"\n              v-if=\"isCount\"\n              format=\"ss秒后可发送\"\n              :time=\"1000 * 5\"\n            />\n            <van-button\n              :loading=\"isloading\"\n              v-if=\"!isCount\"\n              @click.prevent=\"onSendsms\"\n              class=\"send-btn\"\n              size=\"small\"\n              round\n              >获取验证码</van-button\n            >\n          </template>\n        </van-field>\n        <div class=\"login-btn-container\">\n          <van-button class=\"login-btn\" type=\"primary\" block>登录</van-button>\n        </div>\n      </van-cell-group>\n    </van-form>\n  </div>\n</template>\n\n<script>\nimport { login, sendSms } from \"@/api\";\nimport { Toast } from \"vant\";\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      user: {\n        mobile: \"\",\n        code: \"\",\n      },\n      // 验证规则\n      formRules: {\n        mobile: [\n          {\n            required: true,\n            message: \"请输入手机号！\",\n            trigger: \"onBlur\",\n          },\n          {\n            pattern:\n              /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/,\n            message: \"请输入正确的手机号！\",\n            trigger: \"onBlur\",\n          },\n        ],\n        code: [\n          {\n            required: true,\n            message: \"请输入验证码！\",\n            trigger: \"onBlur\",\n          },\n          {\n            pattern: /\\d{6}$/,\n            message: \"请输入正确的验证码！\",\n            trigger: \"onBlur\",\n          },\n        ],\n      },\n      isCount: false,\n      isloading: false,\n    };\n  },\n  methods: {\n    async onLogin() {\n      Toast.loading({\n        message: \"登录中...\",\n        forbidClick: true, //禁止\n        duration: 0,\n      });\n      try {\n        const { data } = await login(this.user);\n        Toast.success(\"登录成功！\");\n        this.$store.dispatch(\"setUser\", data.data);\n\n        // 跳转之前 清除页面缓存\n        this.$store.commit(\"REMOVECACHEPAGE\", \"layout\");\n\n        // this.$router.back();\n        // 跳转回原来的页面\n        this.$router.push(this.$route.query.redirect || \"/\");\n      } catch (error) {\n        console.log(error);\n        Toast.fail(\"登录失败！\");\n      }\n    },\n    onFailed(error) {\n      if (error.errors[0]) {\n        this.$toast({\n          message: error.errors[0].message,\n          position: \"top\",\n        });\n      }\n    },\n    async onSendsms() {\n      // 让button显示loading\n      this.isloading = true;\n      // 校验手机号之后再进行发送\n      try {\n        await this.$refs[\"login-form\"].validate(\"mobile\");\n        // 验证通过\n        await sendSms(this.user.mobile);\n        this.isCount = true;\n      } catch (error) {\n        let msg = \"\";\n        // 进行错误的判断\n        if (error && error.response && error.response.status == 429) {\n          msg = \"发送太频繁了请稍后重试\";\n        } else if (error.name == \"mobile\") {\n          msg = error.message;\n        } else if (error.response.status == 404) {\n          msg = \"手机号错误，请重新尝试\";\n        } else {\n          msg = \"未知错误，请重新尝试\";\n        }\n        this.$toast({\n          message: msg,\n          position: \"top\",\n        });\n      }\n      // 让button关闭loading\n      this.isloading = false;\n    },\n  },\n  beforeRouteEnter (to, from, next) {\n      next(vm=>{\n          if(vm.$store.state.user){\n              Toast('你已经登陆过了~');\n              next(from)\n          }else{\n              return true;\n          }\n      })\n  }\n};\n</script>\n\n<style scoped lang=\"less\">\nbody {\n  background-color: #f5f7f9;\n}\n\n.top {\n  background-color: #3296fa;\n  font-size: 16px;\n  color: white;\n  height: 44px;\n}\n\n.login-btn-container {\n  margin: 26px 16px;\n\n  .login-btn {\n    background-color: #3296fa;\n    border: none;\n\n    .van-button__text {\n      font-size: 15px;\n    }\n  }\n}\n\n.send-btn {\n  height: 23px;\n  background-color: #ededed;\n  font-size: 9px;\n  color: #666666;\n}\n.countDown {\n  display: inline-flex;\n  text-align: center;\n  align-items: center;\n  font-size: 9px;\n  color: #666666;\n}\n</style>"],"sourceRoot":"src/views/login"}]}