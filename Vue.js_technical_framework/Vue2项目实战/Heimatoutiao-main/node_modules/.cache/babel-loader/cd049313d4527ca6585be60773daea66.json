{"remainingRequest":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\search\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\src\\views\\search\\index.vue","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\babel.config.js","mtime":1645498622000},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1674635619784},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1674635617236},{"path":"D:\\Web_DEV_ING\\Vue.js_technical_framework\\Vue2项目实战\\Heimatoutiao-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1674635619517}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxXZWJfREVWX0lOR1xcVnVlLmpzX3RlY2huaWNhbF9mcmFtZXdvcmtcXFZ1ZTJcdTk4NzlcdTc2RUVcdTVCOUVcdTYyMThcXEhlaW1hdG91dGlhby1tYWluXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDpcXFdlYl9ERVZfSU5HXFxWdWUuanNfdGVjaG5pY2FsX2ZyYW1ld29ya1xcVnVlMlx1OTg3OVx1NzZFRVx1NUI5RVx1NjIxOFxcSGVpbWF0b3V0aWFvLW1haW5cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXG9iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgVG9hc3QgfSBmcm9tICd2YW50JzsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0VXNlckhpc3RvcnkgfSBmcm9tICdAL2FwaS9zZWFyY2gnOwppbXBvcnQgeyBzZXRJdGVtLCBnZXRJdGVtIH0gZnJvbSAnQC91dGlscy9zdG9yYWdlJzsKaW1wb3J0IHNlYXJjaFN1Z2dlc3Rpb24gZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaC1zdWdnZXN0aW9uLnZ1ZSc7CmltcG9ydCBTZWFyY2hIaXN0b3J5IGZyb20gJy4vY29tcG9uZW50cy9zZWFyY2gtaGlzdG9yeS52dWUnOwppbXBvcnQgU2VhcmNoUmVzdWx0IGZyb20gJy4vY29tcG9uZW50cy9zZWFyY2gtcmVzdWx0LnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBzZWFyY2hTdWdnZXN0aW9uOiBzZWFyY2hTdWdnZXN0aW9uLAogICAgU2VhcmNoSGlzdG9yeTogU2VhcmNoSGlzdG9yeSwKICAgIFNlYXJjaFJlc3VsdDogU2VhcmNoUmVzdWx0CiAgfSwKICBuYW1lOiAnc2VhcmNoJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoVGV4dDogJycsCiAgICAgIGlzUmVzdWx0U2hvdzogZmFsc2UsCiAgICAgIHNlYXJjaEhpc3Rvcnk6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0SGlzdG9yeSgpOwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsndXNlciddKSksCiAgbWV0aG9kczogewogICAgb25TZWFyY2g6IGZ1bmN0aW9uIG9uU2VhcmNoKHNlYXJjaFRleHQpIHsKICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gc2VhcmNoVGV4dDsgLy8g6Kem5Y+R5pCc57SiIOi/m+ihjOaMgeS5heWMluaQnOe0ouWOhuWPsgoKICAgICAgdmFyIGluZGV4ID0gdGhpcy5zZWFyY2hIaXN0b3J5LmluZGV4T2Yoc2VhcmNoVGV4dCk7IC8vIOmYsuatoumHjeWkjeWKoOWFpQoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIHRoaXMuc2VhcmNoSGlzdG9yeS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9IC8vIOe6quW9leaQnOe0ouWOhuWPsgoKCiAgICAgIHRoaXMuc2VhcmNoSGlzdG9yeS51bnNoaWZ0KHNlYXJjaFRleHQpOyAvLyAvLyDmnKrnmbvlvZUtIOaUvuWIsGxvY2Fsc3RvcmFnZeS4rQogICAgICAvLyBzZXRJdGVtKCdzZWFyY2hIaXN0b3J5Jyx0aGlzLnNlYXJjaEhpc3RvcnkpOwogICAgICAvLyDnmbvlvZXlkI4g5q+P5qyh5pCc57SiIOWQjuerr+S8muiHquWKqOe6quW9leaQnOe0ouWOhuWPsgogICAgICAvLyDlsZXnpLrmkJzntKLnu5PmnpwKCiAgICAgIHRoaXMuaXNSZXN1bHRTaG93ID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRIaXN0b3J5OiBmdW5jdGlvbiBnZXRIaXN0b3J5KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyDlkI7nq6/lj6rlrZjlgqjkuoY05p2h5Y6G5Y+y6K6w5b2VCiAgICAgICAgICAgICAgICAvLyDlkIjlubblkI7nq6/ov5Tlm57nmoTljoblj7LorrDlvZXlkozmnKzlnLDnmoTljoblj7LorrDlvZUKICAgICAgICAgICAgICAgIC8vIGxldCBzZWFyY2hIaXRvcnk9W107CiAgICAgICAgICAgICAgICAvLyBsZXQgdXNlclNlYXJjaEhpc3Rvcnk9W107CiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hIaXN0b3J5ID0gZ2V0SXRlbSgnc2VhcmNoSGlzdG9yeScpIHx8IFtdOyAvLyBpZih0aGlzLnVzZXIpewogICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0e2RhdGF9PWF3YWl0IGdldFVzZXJIaXN0b3J5KCk7CiAgICAgICAgICAgICAgICAvLyAgICAgdXNlclNlYXJjaEhpc3Rvcnk9ZGF0YS5kYXRhLmtleXdvcmRzOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8gaWYobG9jYWxIaXN0b3J5KXsKICAgICAgICAgICAgICAgIC8vICAgICBzZWFyY2hIaXRvcnk9Wy4uLm5ldyBTZXQoWy4uLmxvY2FsSGlzdG9yeSwuLi51c2VyU2VhcmNoSGlzdG9yeV0pXTsKICAgICAgICAgICAgICAgIC8vIH1lbHNlewogICAgICAgICAgICAgICAgLy8gICAgIHNlYXJjaEhpdG9yeT11c2VyU2VhcmNoSGlzdG9yeTsKICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VhcmNoSGlzdG9yeT1zZWFyY2hIaXRvcnk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvLyDpgJrov4d3YXRjaOe7n+S4gOWkhOeQhmhpc3RvcnkKICAgIHNlYXJjaEhpc3Rvcnk6IHsKICAgICAgaXNEZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHNldEl0ZW0oJ3NlYXJjaEhpc3RvcnknLCB0aGlzLnNlYXJjaEhpc3RvcnkpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,SAAA,KAAA,QAAA,MAAA;AACA,SAAA,QAAA,QAAA,MAAA;AACA,SAAA,cAAA,QAAA,cAAA;AACA,SAAA,OAAA,EAAA,OAAA,QAAA,iBAAA;AACA,OAAA,gBAAA,MAAA,oCAAA;AACA,OAAA,aAAA,MAAA,iCAAA;AACA,OAAA,YAAA,MAAA,gCAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA,gBADA;AAEA,IAAA,aAAA,EAAA,aAFA;AAGA,IAAA,YAAA,EAAA;AAHA,GADA;AAMA,EAAA,IAAA,EAAA,QANA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,KAFA;AAGA,MAAA,aAAA,EAAA;AAHA,KAAA;AAKA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,UAAA;AACA,GAhBA;AAiBA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,MAAA,CAAA,CADA,CAjBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,UADA,EACA;AACA,WAAA,UAAA,GAAA,UAAA,CADA,CAEA;;AACA,UAAA,KAAA,GAAA,KAAA,aAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAHA,CAIA;;AACA,UAAA,KAAA,KAAA,CAAA,CAAA,EAAA;AACA,aAAA,aAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,OAPA,CAQA;;;AACA,WAAA,aAAA,CAAA,OAAA,CAAA,UAAA,EATA,CAUA;AACA;AACA;AACA;;AACA,WAAA,YAAA,GAAA,IAAA;AACA,KAhBA;AAiBA,IAAA,UAjBA,wBAiBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,gBAAA,KAAA,CAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA,IAAA,EAAA,CALA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAjCA,GApBA;AAuDA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,aAAA,EAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,OAFA,qBAEA;AACA,QAAA,OAAA,CAAA,eAAA,EAAA,KAAA,aAAA,CAAA;AACA;AAJA;AAFA;AAvDA,CAAA","sourcesContent":["<template>\n    <div class=\"search-container\">\n        <!-- 顶部搜索输入框 -->\n        <form action=\"/\">\n            <van-search v-model=\"searchText\" show-action placeholder=\"请输入搜索关键词\" @search=\"onSearch(searchText)\"\n                @focus=\"isResultShow=false\" @cancel=\"$router.back()\" />\n        </form>\n\n        <!-- 搜索结果 -->\n        <search-result :searchText=\"searchText\" v-if=\"isResultShow\">\n        </search-result>\n\n        <!-- 联想建议 -->\n        <search-suggestion @search=\"onSearch\" :searchText=\"searchText\" v-else-if=\"searchText\">\n        </search-suggestion>\n\n        <!-- 历史记录 -->\n        <search-history\n        @update-history=\"searchHistory = $event\"\n        @search=\"onSearch\"\n        :searchHistory=\"searchHistory\"\n        v-else>\n        </search-history>\n    </div>\n</template>\n\n<script>\n    import {Toast} from 'vant';\n    import {mapState} from 'vuex'\n    import {getUserHistory} from '@/api/search'\n    import {setItem,getItem} from '@/utils/storage'\n    import searchSuggestion from './components/search-suggestion.vue';\n    import SearchHistory from './components/search-history.vue';\n    import SearchResult from './components/search-result.vue';\n    export default {\n        components: {\n            searchSuggestion,\n            SearchHistory,\n            SearchResult\n        },\n        name: 'search',\n        data() {\n            return {\n                searchText: '',\n                isResultShow: false,\n                searchHistory: []\n            };\n        },\n        mounted() {\n            this.getHistory();\n        },\n        computed:{\n            ...mapState(['user'])\n        },\n        methods: {\n            onSearch(searchText) {\n                this.searchText = searchText;\n                // 触发搜索 进行持久化搜索历史\n                const index=this.searchHistory.indexOf(searchText);\n                // 防止重复加入\n                if(index!==-1){\n                    this.searchHistory.splice(index,1);\n                }\n                // 纪录搜索历史\n                this.searchHistory.unshift(searchText);\n                // // 未登录- 放到localstorage中\n                // setItem('searchHistory',this.searchHistory);\n                // 登录后 每次搜索 后端会自动纪录搜索历史\n                // 展示搜索结果\n                this.isResultShow = true;\n            },\n            async getHistory(){\n                // 后端只存储了4条历史记录\n                // 合并后端返回的历史记录和本地的历史记录\n                // let searchHitory=[];\n                // let userSearchHistory=[];\n                this.searchHistory=getItem('searchHistory')||[];\n                // if(this.user){\n                //     const{data}=await getUserHistory();\n                //     userSearchHistory=data.data.keywords;\n                // }\n                // if(localHistory){\n                //     searchHitory=[...new Set([...localHistory,...userSearchHistory])];\n                // }else{\n                //     searchHitory=userSearchHistory;\n                // }\n                // this.searchHistory=searchHitory;\n            }\n        },\n        watch:{\n            // 通过watch统一处理history\n            searchHistory:{\n                isDeep:true,\n                handler(){\n                    setItem('searchHistory',this.searchHistory);\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    .search-container {}\n</style>"],"sourceRoot":"src/views/search"}]}